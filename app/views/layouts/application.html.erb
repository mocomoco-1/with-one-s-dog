<!DOCTYPE html>
<html>

<head>
  <title><%= page_title(yield(:title)) %></title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <%= yield :head %>

  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="<%= asset_path 'favicon.ico' %>" type="image/x-icon">
  <link rel="shortcut icon" href="<%= asset_path 'favicon.ico' %>" type="image/x-icon">
  <link rel="apple-touch-icon" href="<%= asset_path 'favicon.ico' %>">
  <%= stylesheet_link_tag "application", "data-turbo-track": "reload", "media": "all" %>
  <%= javascript_include_tag "application", "type": "module", defer: true %>
  <%= turbo_include_tags %>
</head>

<body class="min-h-screen bg-gradient-to-b from-[#F6F8F7] to-[#F7F6E4]">
  <div class="flex flex-col min-h-screen" data-controller="menu-toggle">
    <%= render 'shared/header' %>
    <div class="flex relative flex-1">
      <!-- オーバーレイ（モバイル時のみ） -->
      <div data-menu-toggle-target="overlay" data-action="click->menu-toggle#close" class="fixed inset-0 bg-white bg-opacity-50 z-40 hidden lg:hidden"></div>

      <!-- サイドバー -->
      <aside data-menu-toggle-target="sidebar" class="flex flex-col min-h-screen fixed lg:static top-0 left-0 w-64 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 z-50 p-4 bg-white">
        <%= render 'shared/sidebar_menu' %>
      </aside>

      <main class="flex-1 px-4 py-1 mt-1">
        <%= render "shared/flash_message" %>
        <%= yield %>
      </main>
    </div>
    <%= render 'shared/footer' %>
  </div>
</body>

</html>